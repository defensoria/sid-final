<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:h="http://xmlns.jcp.org/jsf/html" 
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:gc="http://xmlns.jcp.org/jsf/composite/gc">

    <ui:composition template="../template/template.xhtml">

        <ui:define name="content">
            <h:form id="idForm" class="form-horizontal">
                <table style="width: 100%; font-size: 100%">
                    <td style="width: 18%; vertical-align: top; padding-right: 5px; ">
                        <div class="file-manager">
                            <a href="mail_compose.html" class="btn btn-block btn-primary compose-mail">Folder</a>
                            <div class="space-25"></div>

                            <ul style="padding: 0" class="folder-list m-b-md">
                                <li><a jsf:action="#{bandejaController.cargarTotalInternos(1)}" style="text-decoration: none; cursor: pointer; font-size: 13px"> <i class="fa fa-inbox "></i> Alertas internas <span class="label label-warning pull-right">#{bandejaController.nroMensajesInternos}</span> </a></li>
                                <li><a jsf:action="#{bandejaController.cargarTotalAutomaticos(1)}" style="text-decoration: none; cursor: pointer; font-size: 13px"> <i class="fa fa-envelope-o"></i> Alertas autom√°ticas <span class="label label-warning pull-right">#{bandejaController.nroMensajesAutomaticos}</span></a></li>
                                <li><a jsf:action="#{bandejaController.cargarTotalProgramados(1)}" style="text-decoration: none; cursor: pointer; font-size: 13px"> <i class="fa fa-certificate"></i> Alertas programadas <span class="label label-warning pull-right">#{bandejaController.nroMensajesProgramados}</span></a></li>
                            </ul>

                            <div class="clearfix"></div>
                        </div>
                    </td>
                    <td>
                        <div class="panel panel-default" style="font-size: 14px">

                            <table style="width: 100%;" >
                                <tr>
                                    <td style="padding-left: 10px; padding-bottom: 20px; text-align: left; width: 40%">
                                        <h3 style="color: #676a6c;">Bandeja (#{bandejaController.listaMensajes.size()})</h3>
                                    </td>
                                    <td style="text-align: right;padding-bottom: 20px; padding-right: 30px">
                                        <div class="form-group" style="width: 60%; float: right">

                                            <div class="input-group">


                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="padding-left: 10px">
                                        <a jsf:action="#{bandejaController.cargarBandeja()}" style="color: #676a6c;" class="btn btn-sm btn-default">
                                            <span class="glyphicon glyphicon-refresh" />Actualizar
                                        </a>

                                        <a style="color: #676a6c;" class="btn btn-sm btn-default" jsf:action="#{bandejaController.eliminarMensajes()}">
                                            <span class="glyphicon glyphicon-trash" />
                                        </a>
                                    </td>
                                    <td style="text-align: right; padding-right: 15px">
                                        <h:panelGroup rendered="#{bandejaController.indicadorBandeja == 1}">
                                            <a style="color: #676a6c;" class="btn btn-sm btn-default" jsf:action="#{bandejaController.cargarTotalAutomaticos(bandejaController.nroPaginaAutomatica - 1)}">
                                                <span class="glyphicon glyphicon-arrow-left" />
                                            </a>
                                            <a style="color: #676a6c;" class="btn btn-sm btn-default" jsf:action="#{bandejaController.cargarTotalAutomaticos(bandejaController.nroPaginaAutomatica + 1)}">
                                                <span class="glyphicon glyphicon-arrow-right" />
                                            </a>
                                            <br/>
                                            <h:outputText rendered="#{bandejaController.nroPaginaAutomatica > 0}" style="font-weight: bold" value="#{((bandejaController.nroPaginaAutomatica - 1)*20)+bandejaController.listaMensajes.size()} de #{bandejaController.nroMensajesAutomaticos}" />
                                            <h:outputText rendered="#{bandejaController.nroPaginaAutomatica == 0}" style="font-weight: bold" value="#{bandejaController.listaMensajes.size()} de #{bandejaController.nroMensajesAutomaticos}" />
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{bandejaController.indicadorBandeja == 2}">
                                            <a style="color: #676a6c;" class="btn btn-sm btn-default" jsf:action="#{bandejaController.cargarTotalProgramados(bandejaController.nroPaginaAutomatica - 1)}">
                                                <span class="glyphicon glyphicon-arrow-left" />
                                            </a>
                                            <a style="color: #676a6c;" class="btn btn-sm btn-default" jsf:action="#{bandejaController.cargarTotalProgramados(bandejaController.nroPaginaAutomatica + 1)}">
                                                <span class="glyphicon glyphicon-arrow-right" />
                                            </a>
                                            <br/>
                                            <h:outputText rendered="#{bandejaController.nroPaginaAutomatica > 0}" style="font-weight: bold" value="#{((bandejaController.nroPaginaAutomatica - 1)*20)+bandejaController.listaMensajes.size()} de #{bandejaController.nroMensajesProgramados}" />
                                            <h:outputText rendered="#{bandejaController.nroPaginaAutomatica == 0}" style="font-weight: bold" value="#{bandejaController.listaMensajes.size()} de #{bandejaController.nroMensajesProgramados}" />
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{bandejaController.indicadorBandeja == 3}">
                                            <a style="color: #676a6c;" class="btn btn-sm btn-default" jsf:action="#{bandejaController.cargarTotalInternos(bandejaController.nroPaginaAutomatica - 1)}">
                                                <span class="glyphicon glyphicon-arrow-left" />
                                            </a>
                                            <a style="color: #676a6c;" class="btn btn-sm btn-default" jsf:action="#{bandejaController.cargarTotalInternos(bandejaController.nroPaginaAutomatica + 1)}">
                                                <span class="glyphicon glyphicon-arrow-right" />
                                            </a>
                                            <br/>
                                            <h:outputText rendered="#{bandejaController.nroPaginaAutomatica > 0}" style="font-weight: bold" value="#{((bandejaController.nroPaginaAutomatica - 1)*20)+bandejaController.listaMensajes.size()} de #{bandejaController.nroMensajesInternos}" />
                                            <h:outputText rendered="#{bandejaController.nroPaginaAutomatica == 0}" style="font-weight: bold" value="#{bandejaController.listaMensajes.size()} de #{bandejaController.nroMensajesInternos}" />
                                        </h:panelGroup>
                                    </td>
                                </tr>
                            </table>
                            <br/><br/>


                            <table style="width: 100%;border-top: 1px solid #ddd;" class="table table-hover table-mail" >
                                <c:forEach var="x" items="#{bandejaController.listaMensajes}">
                                    <tr class="read">
                                        <td class="check-mail">
                                            <h:selectBooleanCheckbox value="#{x.indicador}"  class="i-checks" />
                                        </td>
                                        <td class="mail-ontact">
                                            <a jsf:action="#{bandejaController.verMensajeBandeja(x)}" style="color: #{x.estado == 'VIS'? '#787878' : 'red'} ; font-weight:  #{x.estado == 'VIS'? '' : 'bold'}">
                                                #{x.nombreRemitente}
                                            </a>
                                        </td>
                                        <td class="mail-subject">
                                            <span class="label pull-left" style="color: white; background-color: #{x.colorTipo}">#{x.detalleTipo}</span>
                                        </td>
                                        <td class="mail-subject">
                                            <a jsf:action="#{bandejaController.verMensajeBandeja(x)}" style="color: #{x.estado == 'VIS'? '#787878' : 'red'} ; font-weight:  #{x.estado == 'VIS'? '' : 'bold'}">
                                                #{x.numeroExpediente}
                                            </a>
                                        </td>
                                        <td class="text-right mail-date">
                                            <h:outputText value="#{x.fechaEnvio}" >
                                                <f:convertDateTime pattern="dd/MM/yyyy" timeZone="America/Lima" />
                                            </h:outputText>
                                        </td>
                                    </tr>
                                </c:forEach>
                            </table>
                        </div>
                    </td>
                </table>
            </h:form>
        </ui:define>
    </ui:composition>
</html>