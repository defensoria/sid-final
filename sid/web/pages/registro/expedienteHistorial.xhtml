<html xmlns="http://www.w3.org/1999/xhtml" 
      xmlns:h="http://xmlns.jcp.org/jsf/html" 
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:gc="http://xmlns.jcp.org/jsf/composite/gc">

    <ui:composition template="../template/templateCabeceraExpediente.xhtml">

        <ui:define name="content2">
            <ul class="nav nav-tabs">
                    <li role="presentation" >
                        <a style="cursor: pointer" jsf:action="#{registroController.datosGeneralesExpediente()}">
                            <span style="font-size: medium; color: purple" class="glyphicon glyphicon-list-alt" > Datos generales</span>
                        </a>
                    </li>
                    <li role="presentation">
                        <a style="cursor: pointer" jsf:rendered="#{registroController.etapaEstado.idEtapa > 0}" jsf:action="#{registroController.cargarExpedienteGestionLista()}">
                            <span style="font-size: medium; color: purple" class="glyphicon glyphicon-list-alt" > Gestiones externas</span>
                        </a>
                    </li>
                    <li role="presentation">
                        <a style="cursor: pointer" jsf:rendered="#{registroController.etapaEstado.idEtapa > 0}" jsf:action="#{registroController.inicioAcciones()}">
                            <span style="font-size: medium; color: purple" class="glyphicon glyphicon-list-alt" > Gestiones internas</span>
                        </a>
                    </li>
                    <li role="presentation" class="active">
                        <a style="cursor: pointer" jsf:action="#{registroController.cargarHistorial()}">
                            <span style="font-size: large; color: #007ACC; font-weight: bold" class="glyphicon glyphicon-list-alt"> Historial</span>
                        </a>
                    </li>
                <li role="presentation">
                        <a style="cursor: pointer" jsf:rendered="#{registroController.etapaEstado.idEtapa > 0}" jsf:action="#{registroController.cargarCompartir()}">
                            <span style="font-size: medium; color: purple" class="glyphicon glyphicon-list-alt" > Compartir</span>
                        </a>
                    </li>
                </ul>
            <h:form id="idForm" class="form-horizontal">
                <div class="panel panel-featured-top-primary">
                    <div class="panel-body">
                        <h:dataTable value="#{registroController.listaHistorialExpediente}" var="historial" class="table table-hover" binding="#{row}">
                            <h:column>
                                <f:facet name="header">Nro.</f:facet>
                                <h:outputText value="#{rowx.rowIndex+1}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">Expediente</f:facet>
                                <h:outputText value="#{historial.numero}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">Tipo</f:facet>
                                <h:outputText value="#{historial.tipo}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">Descripcion</f:facet>
                                <h:outputText value="#{historial.descripcion}" />
                            </h:column>
                            <h:column>
                                <f:facet name="header">Fecha</f:facet>
                                <h:outputText value="#{historial.fecha}" >
                                    <f:convertDateTime pattern="dd/MM/yyyy h:mm a" timeZone="America/Lima" />
                                </h:outputText>
                            </h:column>
                            <h:column>
                                <f:facet name="header">Usuario</f:facet>
                                <h:outputText value="#{historial.usuario}" />
                            </h:column>

                        </h:dataTable>
                    </div>
                </div>
            </h:form>
        </ui:define>
    </ui:composition>
</html>